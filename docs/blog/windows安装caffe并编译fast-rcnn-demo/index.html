<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Example blog">


<meta property="twitter:title" content="windows安装caffe并编译fast-rcnn-demo">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="img/banner.png">

<meta property="twitter:description" content="">

<base href="">
<title>


      - windows安装caffe并编译fast-rcnn-demo 

</title>
<link rel="canonical" href="blog/windows%E5%AE%89%E8%A3%85caffe%E5%B9%B6%E7%BC%96%E8%AF%91fast-rcnn-demo/">


<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/ionicons.min.css">


  <link rel="stylesheet" href="css/highlight.min.css">



  <link rel="stylesheet" href="css/progressively.min.css">





<link rel="shortcut icon"

    href="img/favicon.ico"

>



</head>


<body lang="">


<section class="header"> 

    <div class="container">
        <a href=""><img class="logo" src="img/logo.png" alt="logo" /></a>
        <div class="content">
            <a href=""><div class="name"><h1></h1></div></a>
            <nav>
                <ul>
                    
                        <a href="blog/"><li>Blog</li></a>
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                            <a href="projects"><li>projects</li></a>
                            
                        
                    
                    
                        
                            <a href="/about/"><li>About</li></a>
                        
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
        
        

        

        

        
            <a href="/index.xml">
                <i class="icon ion-social-rss larger" title="rss"></i>
            </a>
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    windows安装caffe并编译fast-rcnn-demo

</div>

                </div>
                <div class="meta">
                    <div class="date" title="Thu Sep 1 2016 20:56:28 UTC">Sep 1, 2016</div>
                    <div class="reading-time"><div class="middot"></div>1 minute read</div>
                </div>
            </div>
            <div class="markdown">
                
                    

<h1 id="microsoft-caffe">microsoft caffe</h1>

<p>首先在微软github主页下载<a href="https://github.com/microsoft/caffe">microsoft-caffe</a>，官方的编译运行文档写得比较详细，按照步骤来利用VS编译一般没什么问题。一般常见的问题是<code>error C2220: 警告被视为错误</code>，只需<strong>右键项目，属性，C/C++，Treat Warnings as Error设置为No</strong>即可。附上个人的<a href="http://7xt5lb.com2.z0.glb.clouddn.com/CommonSettings.props">CommonSettings.props</a>，仅供参考。</p>

<p>所有项目编译成功之后，将<code>caffe_root\Build\x64\Release\pycaffe</code>设置环境变量PythonPath。设置之后打开Python，若import caffe成功则表示编译成功。</p>

<h1 id="caffe-mnist-示例">caffe mnist 示例</h1>

<p>Windows下很多人用cygwin来模拟一些Linux操作，个人推荐使用<a href="http://babun.github.io/">Babun</a>，一款优雅好用的Windows shell工具。</p>

<p>按照caffe官网<a href="http://caffe.berkeleyvision.org/gathered/examples/mnist.html">mnist文档</a>一步一步即可。</p>

<h3 id="下载数据集">下载数据集</h3>

<ul>
<li>进入babun</li>
<li>cd到caffe_root</li>
<li>输入<code>./data/mnist/get_mnist.sh</code></li>
</ul>

<h3 id="转化数据集为lmdb">转化数据集为lmdb</h3>

<ul>
<li>修改<code>./examples/mnist/create_mnist.sh</code>, 第8行<code>BUILD=build/examples/mnist</code> &ndash;&gt; <code>BUILD=Build/x64/Release</code>, 第17行和第19行<code>convert_mnist_data.bin</code> &ndash;&gt; <code>convert_mnist_data</code></li>
<li>同样在Babun下，输入<code>./examples/mnist/create_mnist.sh</code></li>
</ul>

<h3 id="训练lenet">训练Lenet</h3>

<ul>
<li><p>修改<code>./examples/mnist/train_lenet.sh</code>, 第4行<code>./build/tools/caffe train &ndash;solver=examples/mnist/lenet_solver.prototxt $@ &ndash;&gt;</p>

<pre><code> BUILD=Build/x64/Release
 $BUILD/caffe train --solver=examples/mnist/lenet_solver.prototxt $@
</code></pre></li>

<li><p>在babun下，输入<code>./examples/mnist/train_lenet.sh</code>，得到如下图结果，示例mnist成功跑通</p></li>
</ul>

<p><figure class="progressive"><img class="progressive__img progressive--not-loaded" data-progressive="http://7xt5lb.com2.z0.glb.clouddn.com/high/lenet_win.jpg" src="http://7xt5lb.com2.z0.glb.clouddn.com/low/lenet_win.jpg" alt="lenet_result" /></p></figure>

<h1 id="fast-rcnn-demo示例">fast rcnn demo示例</h1>

<p>上面这些步骤完成后，如果直接进入fastrcnn-root,运行<code>python ./tools/demo.py</code>（<strong>注意：此时在cmd中运行即可，目前babun自带Python，但是好像不能调用系统自带的python</strong>）会提示不存在ROIPooling，导致demo运行失败。进入caffe项目发现，roi_pooling_layer.cpp 以及 roi_pooling_layer.cu根本就没有编译。因此将 roi_pooling_layer.cpp 添加进 libcaffe-src 中，将 roi_pooling_layer.cu 添加进 libcaffe-cu 中，再重新编译即可。</p>

<p>再次运行<code>python ./tools/demo.py</code>得到结果如下</p>

<p><figure class="progressive"><img class="progressive__img progressive--not-loaded" data-progressive="http://7xt5lb.com2.z0.glb.clouddn.com/high/fastrcnn_demo.jpg" src="http://7xt5lb.com2.z0.glb.clouddn.com/low/fastrcnn_demo.jpg" alt="demo" /></p></figure>

<p><figure class="progressive"><img class="progressive__img progressive--not-loaded" data-progressive="http://7xt5lb.com2.z0.glb.clouddn.com/high/fastrcnn_demo_pic.png" src="http://7xt5lb.com2.z0.glb.clouddn.com/low/fastrcnn_demo_pic.png" alt="demo_pic" /></p></figure>

<h1 id="后续">后续</h1>

<p>后续就是在fast rcnn上训练自己的数据了，Linux上已经跑通，Windows上有待测试。</p>

                
                <br>
                <p><a href="blog">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
        </div>
    </div>
</section>


  <script src="js/highlight.min.js" defer></script>
  



  <script src="js/progressively.min.js" defer></script>


<script>
  window.onload = function() {
    
      hljs.initHighlighting();
    
    
      progressively.init({delay: 30, throttle: 50});
    
  };
</script>

</body>
</html>

